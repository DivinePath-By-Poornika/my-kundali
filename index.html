<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Swiss Ephemeris Demo</title>
</head>
<body>
  <h1>üåû Swiss Ephemeris Sun Calculation</h1>
  <pre id="output">Loading...</pre>

  <!-- Swiss Ephemeris JS (via CDN) -->
  <script src="https://cdn.jsdelivr.net/gh/aloisdeniel/swiss_ephemeris_wasm/dist/swisseph.js"></script>

  <script>
    // Swiss Ephemeris module config
    window.Module = {
      locateFile: function (path) {
        if (path.endsWith(".wasm")) {
          // CDN se wasm load karna
          return "https://cdn.jsdelivr.net/gh/aloisdeniel/swiss_ephemeris_wasm/dist/swisseph.wasm";
        }
        return path;
      },
      onRuntimeInitialized: function () {
        const swe = Module;
        const out = document.getElementById("output");

        try {
          // Example: Julian Date (2000-01-01 12:00 UT)
          const jd = 2451545.0;
          const iflag = swe.SEFLG_SWIEPH;
          let xx = new Float64Array(6);
          let serr = "";

          // Sun calculation
          const result = swe.swe_calc_ut(jd, swe.SE_SUN, iflag, xx, serr);

          out.textContent =
            "Julian Date: " + jd + "\n" +
            "Result Code: " + result + "\n" +
            "Sun Longitude: " + xx[0].toFixed(6) + "¬∞\n" +
            "Sun Latitude: " + xx[1].toFixed(6) + "¬∞\n" +
            "Distance (AU): " + xx[2].toFixed(6) + "\n" +
            "Error: " + serr;
        } catch (err) {
          out.textContent = "‚ö†Ô∏è Error: " + err;
        }
      }
    };
  </script>
</body>
</html>
