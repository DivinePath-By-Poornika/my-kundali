```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kundli Pro â€” Offline</title>
  <script src="https://cdn.jsdelivr.net/npm/astronomia@2.4.1/lib/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background: #f5f6fa; font-family: 'Poppins', sans-serif; }
    .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card:hover { transform: translateY(-6px); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
    #chart { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); gap: 2px; width: 320px; height: 320px; margin: auto; }
    .house { border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 12px; padding: 2px; text-align: center; }
  </style>
</head>
<body class="p-6">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold text-center mb-6">Kundli Pro ðŸ”®</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="card bg-white p-6 rounded-2xl shadow">
        <h2 class="text-xl font-semibold mb-4">Birth Details</h2>
        <label class="block mb-2">Date of Birth</label>
        <input type="date" id="dob" class="w-full border p-2 rounded mb-4">

        <label class="block mb-2">Time of Birth</label>
        <input type="time" id="tob" class="w-full border p-2 rounded mb-4">

        <label class="block mb-2">City</label>
        <select id="city" class="w-full border p-2 rounded mb-4">
          <option value="28.61,77.23">Delhi</option>
          <option value="22.57,88.36">Kolkata</option>
          <option value="23.36,85.33">Ranchi</option>
          <option value="23.99,85.36">Hazaribagh</option>
        </select>

        <button onclick="generateKundli()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700">Generate Kundli</button>
      </div>

      <div class="card bg-white p-6 rounded-2xl shadow text-center">
        <h2 class="text-xl font-semibold mb-4">Chart</h2>
        <div id="chart"></div>
        <div class="flex justify-center mt-4 gap-2">
          <button onclick="downloadPNG()" class="bg-green-500 text-white px-3 py-1 rounded">Download PNG</button>
          <button onclick="downloadTXT()" class="bg-blue-500 text-white px-3 py-1 rounded">Download TXT</button>
        </div>
      </div>
    </div>

    <div id="analysis" class="card bg-white p-6 rounded-2xl shadow mt-6 hidden"></div>
  </div>

  <script>
    const planets = ["Sun","Moon","Mars","Mercury","Jupiter","Venus","Saturn"];

    function generateKundli() {
      const dob = document.getElementById('dob').value;
      const tob = document.getElementById('tob').value;
      const [lat, lon] = document.getElementById('city').value.split(",").map(Number);
      if (!dob || !tob) { alert("Please enter DOB & TOB"); return; }

      const jd = toJulian(new Date(`${dob}T${tob}:00Z`));

      // Fake planet positions (demo without Swiss Ephemeris)
      let houses = Array(12).fill(null).map((_,i)=>`House ${i+1}`);
      let positions = planets.map((p,i)=>({name:p, sign:["Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius","Capricorn","Aquarius","Pisces"][Math.floor(Math.random()*12)]}));

      drawChart(houses, positions);
      showAnalysis(positions);
    }

    function toJulian(date) {
      return date/86400000 + 2440587.5;
    }

    function drawChart(houses, positions) {
      const chart = document.getElementById('chart');
      chart.innerHTML = '';
      for (let i=0;i<9;i++) {
        const div = document.createElement('div');
        div.className = 'house';
        if (i!==4) div.innerHTML = houses[i%12];
        chart.appendChild(div);
      }
    }

    function showAnalysis(positions) {
      const box = document.getElementById('analysis');
      box.classList.remove('hidden');
      box.innerHTML = `<h2 class='text-xl font-bold mb-2'>Detailed Analysis</h2>` +
        positions.map(p=>`<p><b>${p.name}</b> is in <b>${p.sign}</b> â€” influencing traits accordingly.</p>`).join("");
    }

    async function downloadPNG() {
      const node = document.body;
      const canvas = await html2canvas(node);
      const link = document.createElement('a');
      link.download = 'kundli.png';
      link.href = canvas.toDataURL();
      link.click();
    }

    function downloadTXT() {
      const text = document.getElementById('analysis').innerText;
      const blob = new Blob([text], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'kundli.txt';
      link.click();
    }
  </script>
</body>
</html>
```
